import urllib
import urllib2
import shutil
import zipfile
import os

req = urllib2.Request('http://edge.regalpts.com/EDGE/CAD/PartStream.aspx?CADFile=E_2_3-8&PartID=1073436&PartDesc=E%202%203/8')
values = {
'__EVENTTARGET':'Master$ContentPlaceHolder1$ButtonDownload',
'__EVENTARGUMENT':'',
'__LASTFOCUS':'',
'__VIEWSTATE': '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FgQfAAUTUGFyYXNvbGlkIFRleHQtMTIuMR8GaGRkFCsAAg8WBB8ABRNQYXJhc29saWQgVGV4dC0xMi4wHwZoZGQUKwACDxYEHwAFE1BhcmFzb2xpZCBUZXh0LTExLjEfBmhkZBQrAAIPFgQfAAUTUGFyYXNvbGlkIFRleHQtMTEuMB8GaGRkFCsAAg8WBB8ABRNQYXJhc29saWQgVGV4dC0xMC4wHwZoZGQUKwACDxYEHwAFElBhcmFzb2xpZCBUZXh0LTkuMR8GaGRkFCsAAg8WBB8ABRJQYXJhc29saWQgVGV4dC05LjAfBmhkZBQrAAIPFgQfAAUSUGFyYXNvbGlkIFRleHQtOC4wHwZoZGQUKwACDxYEHwAFFkVkcmF3aW5nIFBhcnQvQXNzZW1ibHkfBmhkZA8WUmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYWAQV3VGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3hJdGVtLCBUZWxlcmlrLldlYi5VSSwgVmVyc2lvbj0yMDE1LjEuNDAxLjM1LCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTEyMWZhZTc4MTY1YmEzZDQWqAFmDw8WBB4IQ3NzQ2xhc3MFCXJjYkhlYWRlch4EXyFTQgICZGQCAQ8PFgQfBwUJcmNiRm9vdGVyHwgCAmRkAgIPDxYEHwAFDVNlbGVjdCBGb3JtYXQfBmdkZAIDDw8WBB8ABR1TT0xJRFdPUktTIFBhcnQvQXNzZW1ibHktMjAxNx8GaGRkAgQPDxYEHwAFHVNPTElEV09SS1MgUGFydC9Bc3NlbWJseS0yMDE2HwZoZGQCBQ8PFgQfAAUdU09MSURXT1JLUyBQYXJ0L0Fzc2VtYmx5LTIwMTUfBmhkZAIGDw8WBB8ABSZDQVRJQSBWNSBQYXJ0L0Fzc2VtYmx5LVY1LTZSMjAxMiAoUjIyKR8GaGRkAgcPDxYEHwAFCkFOVklMLTUwMDAfBmhkZAIIDw8WBB8ABRVBc2hsYXItVmVsbHVtIEFyZ29uLTQfBmhkZAIJDw8WBB8ABRZBc2hsYXItVmVsbHVtIENvYmFsdC00HwZoZGQCCg8PFgQfAAUVQXNobGFyLVZlbGx1bSBYZW5vbi00HwZoZGQCCw8PFgQfAAUMQ0FES2V5IDNELTIwHwZoZGQCDA8PFgQfAAUMQ0FES2V5IDNELTE5HwZoZGQCDQ8PFgQfAAUQQXV0b0NBRCAzRC1SMjAwMh8GaGRkAg4PDxYEHwAFEUF1dG9DQUQgM0QtUjIwMDBpHwZoZGQCDw8PFgQfAAUQQXV0b0NBRCAzRC1SMjAwMB8GaGRkAhAPDxYEHwAFEUF1dG9DQUQgM0QtUjE0LjAxHwZoZGQCEQ8PFgQfAAUOQXV0b0NBRCAzRC1SMTQfBmhkZAISDw8WBB8ABQdJRkMgMngzHwZoZGQCEw8PFgQfAAUESUdFUx8GaGRkAhQPDxYEHwAFC0ludmVudG9yLVI2HwZoZGQCFQ8PFgQfAAULSW52ZW50b3ItUjUfBmhkZAIWDw8WBB8ABQtJbnZlbnRvci1SNB8GaGRkAhcPDxYEHwAFC0ludmVudG9yLVIzHwZoZGQCGA8PFgQfAAULSW52ZW50b3ItUjIfBmhkZAIZDw8WBB8ABQtJbnZlbnRvci1SMR8GaGRkAhoPDxYEHwAFCUlyb25DQUQtNR8GaGRkAhsPDxYEHwAFCUlyb25DQUQtNB8GaGRkAhwPDxYEHwAFCkpQRUcgRmlsZXMfBmhkZAIdDw8WBB8ABRVNZWNoYW5pY2FsIERlc2t0b3AtUjYfBmhkZAIeDw8WBB8ABRVNZWNoYW5pY2FsIERlc2t0b3AtUjUfBmhkZAIfDw8WBB8ABRVNZWNoYW5pY2FsIERlc2t0b3AtUjQfBmhkZAIgDw8WBB8ABRVNZWNoYW5pY2FsIERlc2t0b3AtUjMfBmhkZAIhDw8WBB8ABRVNZWNoYW5pY2FsIERlc2t0b3AtUjIfBmhkZAIiDw8WBB8ABQdBY3JvYmF0HwZoZGQCIw8PFgQfAAUTUHJvL0UgUGFydC9Bc3NlbWJseR8GaGRkAiQPDxYEHwAFClJldml0LTIwMDkfBmhkZAIlDw8WBB8ABQlBQ0lTLTE0LjAfBmhkZAImDw8WBB8ABQlBQ0lTLTEzLjAfBmhkZAInDw8WBB8ABQlBQ0lTLTEyLjAfBmhkZAIoDw8WBB8ABQlBQ0lTLTExLjAfBmhkZAIpDw8WBB8ABQlBQ0lTLTEwLjAfBmhkZAIqDw8WBB8ABQhBQ0lTLTguMB8GaGRkAisPDxYEHwAFCEFDSVMtNy4wHwZoZGQCLA8PFgQfAAUIQUNJUy02LjAfBmhkZAItDw8WBB8ABQhBQ0lTLTUuMx8GaGRkAi4PDxYEHwAFCEFDSVMtNS4wHwZoZGQCLw8PFgQfAAUIQUNJUy00LjAfBmhkZAIwDw8WBB8ABQhBQ0lTLTMuMB8GaGRkAjEPDxYEHwAFCEFDSVMtMi4xHwZoZGQCMg8PFgQfAAUIQUNJUy0yLjAfBmhkZAIzDw8WBB8ABQhBQ0lTLTEuNx8GaGRkAjQPDxYEHwAFCEFDSVMtMS42HwZoZGQCNQ8PFgQfAAUNU0RSQyBJLURFQVMtOB8GaGRkAjYPDxYEHwAFC1NvbGlkRWRnZS05HwZoZGQCNw8PFgQfAAULU29saWRFZGdlLTgfBmhkZAI4Dw8WBB8ABQtTb2xpZEVkZ2UtNx8GaGRkAjkPDxYEHwAFClNURVAtQVAyMTQfBmhkZAI6Dw8WBB8ABQpTVEVQLUFQMjAzHwZoZGQCOw8PFgQfAAUDU1RMHwZoZGQCPA8PFgQfAAUEVElGRh8GaGRkAj0PDxYEHwAFDlVuaWdyYXBoaWNzLTE4HwZoZGQCPg8PFgQfAAUOVW5pZ3JhcGhpY3MtMTcfBmhkZAI/Dw8WBB8ABQ5VbmlncmFwaGljcy0xNh8GaGRkAkAPDxYEHwAFDlVuaWdyYXBoaWNzLTE1HwZoZGQCQQ8PFgQfAAUDVkRBHwZoZGQCQg8PFgQfAAUEVlJNTB8GaGRkAkMPDxYEHwAFFVBhcmFzb2xpZCBCaW5hcnktMTIuMR8GaGRkAkQPDxYEHwAFFVBhcmFzb2xpZCBCaW5hcnktMTIuMB8GaGRkAkUPDxYEHwAFFVBhcmFzb2xpZCBCaW5hcnktMTEuMR8GaGRkAkYPDxYEHwAFFVBhcmFzb2xpZCBCaW5hcnktMTEuMB8GaGRkAkcPDxYEHwAFFVBhcmFzb2xpZCBCaW5hcnktMTAuMB8GaGRkAkgPDxYEHwAFFFBhcmFzb2xpZCBCaW5hcnktOS4xHwZoZGQCSQ8PFgQfAAUUUGFyYXNvbGlkIEJpbmFyeS05LjAfBmhkZAJKDw8WBB8ABRRQYXJhc29saWQgQmluYXJ5LTguMB8GaGRkAksPDxYEHwAFE1BhcmFzb2xpZCBUZXh0LTEyLjEfBmhkZAJMDw8WBB8ABRNQYXJhc29saWQgVGV4dC0xMi4wHwZoZGQCTQ8PFgQfAAUTUGFyYXNvbGlkIFRleHQtMTEuMR8GaGRkAk4PDxYEHwAFE1BhcmFzb2xpZCBUZXh0LTExLjAfBmhkZAJPDw8WBB8ABRNQYXJhc29saWQgVGV4dC0xMC4wHwZoZGQCUA8PFgQfAAUSUGFyYXNvbGlkIFRleHQtOS4xHwZoZGQCUQ8PFgQfAAUSUGFyYXNvbGlkIFRleHQtOS4wHwZoZGQCUg8PFgQfAAUSUGFyYXNvbGlkIFRleHQtOC4wHwZoZGQCUw8PFgQfAAUWRWRyYXdpbmcgUGFydC9Bc3NlbWJseR8GaGRkAhEPZBYCAgEPFgIeA3NyYwW0AWh0dHA6Ly93d3cuM2RwdWJsaXNoZXIubmV0L1NXU2VydmljZS9vdXRmaWxlM2R3ZWJnbC5hc3A/dmlld2ZpbGU9L1NXRG93bmxvYWRzMS8yMDQ0Mzc1ODQyLTI3ODE5NC9RREVfMl8zMDcyNjIwMTc1NDkxOS5FUFJUJmJnPSUyM0ZGRkZGRiZmYz0lMjM2NjY2NjYmaD0yNzUmdz0yNzUmbHM9MSZmcz0xJmxwPTUma3A9MmQCEw8QZGQWAWZkGAIFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYBBTFNYXN0ZXIkQ29udGVudFBsYWNlSG9sZGVyMSRSYWRDb21ib0JveEZpbGVGb3JtYXRzBTFNYXN0ZXIkQ29udGVudFBsYWNlSG9sZGVyMSRSYWRDb21ib0JveEZpbGVGb3JtYXRzDxQrAAIFDVNlbGVjdCBGb3JtYXRlZCmn0U8keuL6oea3wgaxCsjrkWJr',
'__VIEWSTATEGENERATOR':'F0713377',
'__EVENTVALIDATION':'/wEWBQLavpaeDAKXvcT9DgKUvcT9DgKa0t6NAgL92JX2CO6JPf/IKV100zELfD6ghe9Mnwqm',
'Master$ContentPlaceHolder1$RadComboBoxFileFormats':'IGES',
'Master_ContentPlaceHolder1_RadComboBoxFileFormats_ClientState':'{"logEntries":[],"value":"","text":"IGES","enabled":true,"checkedIndices":[],"checkedItemsTextOverflows":false}',
'Master$ContentPlaceHolder1$RadioButtonListDimension':'3D'
}
req.add_data(urllib.urlencode(values))
resp = urllib2.urlopen(req)

with open('file.zip', 'wb') as file:
    shutil.copyfileobj(resp.fp, file)
with open('file.zip', 'r') as file:
    file.seek(0, os.SEEK_END)
    if file.tell() == 0:
    	os.remove('/data/work/virtualenvs/scrapy/crawls/file.zip')
print zipfile.is_zipfile('/data/work/virtualenvs/scrapy/crawls/file.zip')
